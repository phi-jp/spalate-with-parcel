page-index
  div.p32
    h1 {title}

    div.p16
      div.s64.bg-red
    
    div.mb16
      ul.ml32
        li isNode: {isNode}
        li isBrowser: {isBrowser}
        li(each='{item in [1, 2, 3, 4]}') item {item}

    div.mb16
      h2 グループ一覧
      ul.ml32
        li(each='{item in items}')
          a(href='/{item.ref.path}') {item.data.title}
          
    div.mb16
      img(src='/images/kenkyo.png')

  script.
    this.title = 'Hello, spalate with parcel!';

    this.on('mount', async () => {
      var ref = db.collection('groups');
      var ss = await ref.get({source: "cache"});
      
      if (ss.empty) {
        var ss = await ref.get({source: "server"});
      }

      this.items = ss.docs.map(doc => {
        return {
          id: doc.id,
          ref: doc.ref,
          data: doc.data(),
        }
      });
      console.log('fromCache:', ss.metadata.fromCache);

      this.update();
    });
