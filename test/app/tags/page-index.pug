page-index
  div.p32
    h1 {title}

    div.p16
      div.s64.bg-red
    
    div.mb16
      ul.ml32
        li isNode: {spalate.isNode}
        li isBrowser: {spalate.isBrowser}
        li(each='{item in [1, 2, 3, 4]}') item {item}

    div.mb16
      h2 グループ一覧
      div.ml32
        div(each='{item in items}', data-is='item-group', item='{item}')
    
    div.mb16
      div(data-is='module-note', note-id='1')
      div(data-is='module-note', note-id='2')
      div(data-is='module-note', note-id='3')

    div.mb16
      img(src='/images/kenkyo.png')

  script.
    this.title = 'Hello, spalate with parcel!';

    this.fetch = async () => {
      var ref = db.collection('groups');
      var ss = await ref.get({source: "cache"});
      
      if (ss.empty) {
        var ss = await ref.get({source: "server"});
      }

      var items = ss.docs.map(doc => {
        return {
          id: doc.id,
          ref: doc.ref,
          data: doc.data(),
        }
      });

      return {
        items,
      };
    };

    this.on('created', async () => {
      console.log('page-index');

      document.addEventListener('click', () => {
        console.log('hoge');
      });
    });

    this.on('show', async () => {
      this.title = 'mounted';

      var res = await this.fetch();
      Object.assign(this, res);
      this.update();
    });
